/*! @name videojs-resume @version 1.0.0 @license Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=t(e);const o=s.default.getComponent("Button"),r=s.default.getComponent("Component"),n=s.default.getComponent("ModalDialog");class u extends o{constructor(e,t){super(e,t),this.resumeFromTime=t.resumeFromTime,this.player=e}buildCSSClass(){return"vjs-resume"}createEl(){return super.createEl("button",{innerHTML:`${this.options_.buttonText}`})}handleClick(){this.player.resumeModal.close(),this.player.currentTime(this.resumeFromTime),this.player.play(),this.player.trigger("resumevideo")}handleKeyPress(e){32!==e.which&&13!==e.which||(this.player.paused()?this.player.play():this.player.pause(),e.preventDefault())}}u.prototype.controlText_="Resume";u.prototype.controlText_="No Thanks";s.default.registerComponent("ResumeButton",u),s.default.registerComponent("ResumeCancelButton",class extends o{constructor(e,t){super(e,t),this.player=e}buildCSSClass(){return"vjs-no-resume"}createEl(){return super.createEl("button",{innerHTML:`${this.options_.buttonText}`})}handleClick(){this.player.resumeModal.close(),this.player.play(),this.player.trigger("resumevideo")}}),s.default.registerComponent("ModalButtons",class extends r{constructor(e,t){super(e,t),this.addChild("ResumeButton",{buttonText:t.resumeButtonText,resumeFromTime:t.resumeFromTime}),this.addChild("ResumeCancelButton",{buttonText:t.cancelButtonText,key:t.key})}createEl(){return super.createEl("div",{className:"vjs-resume-modal-buttons",innerHTML:`<p>${this.options_.title}</p>`})}}),s.default.registerComponent("ResumeModal",class extends n{constructor(e,t){super(e,t),this.player_.resumeModal=this,this.open(),this.addChild("ModalButtons",{title:t.title,resumeButtonText:t.resumeButtonText,cancelButtonText:t.cancelButtonText,resumeFromTime:t.resumeFromTime,key:t.key})}buildCSSClass(){return`vjs-resume-modal ${super.buildCSSClass()}`}});s.default.registerPlugin("Resume",(function(e){const t="videojs-resume:"+e.uuid;this.on("timeupdate",(function(){localStorage.setItem(t,this.currentTime())})),this.on("ended",(function(){localStorage.removeItem(t)})),this.ready((function(){const o=localStorage.getItem(t);if(o){var r,n,u;let i=Number.parseFloat(o);if(i>=5){var l;i-=null!=(l=e.playbackOffset)?l:0}i<=0&&(i=0),this.addChild("ResumeModal",{title:null!=(r=e.title)?r:`Resume from <b>${s.default.time.formatTime(i)}</b>?`,resumeButtonText:null!=(n=e.resumeButtonText)?n:"Resume",cancelButtonText:null!=(u=e.cancelButtonText)?u:"No Thanks",resumeFromTime:i,key:t})}}))}))}));
